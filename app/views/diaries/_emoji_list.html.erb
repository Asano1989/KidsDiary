<%# 絵文字選択リスト：モバイル端末で押しやすいパレット形式、影と丸みで浮遊感を演出 %>
<%= turbo_frame_tag "emoji_palette_#{diary.id}" do %>
  <div class="absolute bottom-full left-0 mb-3 flex items-center bg-white border border-neutral-200 shadow-xl rounded-2xl p-2.5 gap-2 z-50 min-w-max animate-in fade-in slide-in-from-bottom-2 duration-200">
    <div class="flex items-center gap-1.5">
      <% Emoji.order("RANDOM()").limit(5).each do |emoji| %>
        <%= button_to diary_reactions_path(diary, emoji_id: emoji.id),
                      method: :post,
                      data: { turbo_frame: "_top" },
                      class: "w-10 h-10 flex items-center justify-center text-xl rounded-xl hover:bg-amber-50 transition-colors active:scale-90" do %>
          <%= emoji.character %>
        <% end %>
      <% end %>
    </div>

    <div class="w-px h-6 bg-neutral-200 mx-1"></div>

    <%= link_to refresh_emoji_diary_path(diary),
                class: "w-10 h-10 flex items-center justify-center text-amber-700 hover:bg-amber-50 active:scale-95 transition-transform ml-1 transition-colors",
                title: "リフレッシュ" do %>
      <span class="icon-[lucide--rotate-ccw] w-5 h-5"></span>
    <% end %>
  </div>
<% end %>
